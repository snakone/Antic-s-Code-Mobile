<app-page-header [title]="'CREATE' | translate"
                 [showMenu]="false">
</app-page-header>

<ion-content force-overscroll="false">
  <ng-container *ngIf="(draftForm$ | async) as form">
    <ion-slides [options]="slideOpts" 
                pager="true"
                class="create"
                (ionSlidesDidLoad)="checkStorage()"
                (ionSlideWillChange)="change(form)">
      <ion-slide class="intro">
        <app-form-create-intro [draftForm]="form"></app-form-create-intro>
      </ion-slide>
      <ion-slide class="data">
        <app-data-picker [draftForm]="form"></app-data-picker>
      </ion-slide>
      <ion-slide class="title">
        <app-form-title [draftForm]="form"></app-form-title>
      </ion-slide>
      <ion-slide class="index">
        <app-form-create-index [draftForm]="form"></app-form-create-index>
      </ion-slide>
      <ion-slide class="message">
        <app-form-create-message [draftForm]="form"></app-form-create-message>
      </ion-slide>
      <ion-slide class="links">
        <app-form-create-links [draftForm]="form"></app-form-create-links>
      </ion-slide>
      <ion-slide>
        <app-form-create-preview [draftForm]="form">
        </app-form-create-preview>
      </ion-slide>
    </ion-slides>
  </ng-container>
</ion-content>

<ion-footer class="ion-no-border">
  <ion-toolbar>
    <ion-button fill="clear" 
                slot="start" 
                color="dark"
                (click)="back()"
                *ngIf="index != 0 && index != (slidesLength - 1)">
      <ion-icon name="chevron-forward-outline"></ion-icon> 
      {{'PREVIOUS' | translate}} 
   </ion-button>
    <ion-button fill="clear" 
                slot="end" 
                color="dark" 
                (click)="next()"
                *ngIf="index != (slidesLength - 1)"
                [disabled]="index === enums.INTRO && !(introValid$ | async) ||
                            index === enums.DATA && !(dataValid$ | async) ||
                            index === enums.TITLE && !(titleValid$ | async) ||
                            index === enums.MESSAGE && !(messageValid$ | async)">
       {{'NEXT' | translate}}
       <ion-icon name="chevron-forward-outline"></ion-icon>
    </ion-button>
  </ion-toolbar>
</ion-footer>
